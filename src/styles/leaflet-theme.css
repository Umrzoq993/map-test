/* leaflet-theme.css */
/* LIGHT (default) */
.leaflet-popup-content-wrapper {
  background: #ffffff;
  color: #0f172a;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  box-shadow: 0 12px 30px rgba(16, 24, 40, 0.15);
}
.leaflet-popup-content {
  margin: 10px 12px;
}
.leaflet-popup-tip {
  background: #ffffff;
  border: 1px solid #e5e7eb;
}
.leaflet-container a.leaflet-popup-close-button {
  color: #334155;
  opacity: 0.85;
}
.leaflet-container a.leaflet-popup-close-button:hover {
  opacity: 1;
}

/* DARK override */
:where(.theme-dark, .dark, [data-theme="dark"]) .leaflet-popup-content-wrapper {
  background: #0f172a;
  color: #e6eef9;
  border-color: #253045;
}
:where(.theme-dark, .dark, [data-theme="dark"]) .leaflet-popup-tip {
  background: #0f172a;
  border-color: #253045;
}
:where(.theme-dark, .dark, [data-theme="dark"])
  .leaflet-container
  a.leaflet-popup-close-button {
  color: #e6eef9;
  opacity: 0.9;
}

/* Org icon (divIcon) — yirik ko'rinish, haloli, oq ring */
.org-icon__dot {
  width: var(--s);
  height: var(--s);
  border-radius: 50%;
  background: var(--bg, #0ea5e9);
  /* oq ring + rangli halo + soyalar */
  box-shadow: 0 0 0 2px var(--stroke, #fff),
    0 0 0 8px var(--halo, rgba(14, 165, 233, 0.32)),
    0 4px 14px rgba(0, 0, 0, 0.35);
  display: grid;
  place-items: center;
}
.org-icon__emoji {
  font-size: calc(var(--s) * 0.55);
  line-height: 1;
  transform: translateY(-1px);
  user-select: none;
}

/* ===== Org (organizational) marker — ROMB dizayn ===== */
.orgk {
  position: relative;
  width: var(--s);
  height: var(--s);
}

.orgk__diamond {
  position: absolute;
  inset: 0;
  background: var(--bg, #0ea5e9);
  transform: rotate(45deg);
  border-radius: 14%; /* yumshoq burchak */
  /* oq kontur + rangli halo + soyalar */
  box-shadow: 0 0 0 3px #ffffff,
    0 0 0 10px var(--halo, rgba(14, 165, 233, 0.28)),
    0 8px 18px rgba(0, 0, 0, 0.35);
}

.orgk__emoji {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%); /* romb ichida to‘g‘ri turadi */
  font-size: calc(var(--s) * 0.52);
  line-height: 1;
  user-select: none;
}

/* ============================
   Map UI tokens (dark/light)
   va "Geometriya tahrirlash" banneri
   ============================ */
.map-ui {
  --panel-bg: #ffffff;
  --panel-fg: #0f172a;
  --panel-border: #e5e7eb;
  --panel-shadow: 0 10px 30px rgba(16, 24, 40, 0.15);

  --brand: #22c55e;
  --brand-2: #16a34a;
}

:where(.dark, [data-theme="dark"], .theme-dark) .map-ui {
  --panel-bg: #0f172a;
  --panel-fg: #e6eef9;
  --panel-border: #253045;
  --panel-shadow: 0 10px 30px rgba(0, 0, 0, 0.45);
}

/* Geometriya banneri (dark-aware) */
.map-ui .geom-edit-banner {
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 550;
  background: var(--panel-bg);
  color: var(--panel-fg);
  border: 1px solid var(--panel-border);
  padding: 10px 12px;
  border-radius: 12px;
  box-shadow: var(--panel-shadow);
  max-width: 360px;
}

.map-ui .geom-edit-banner .title {
  font-weight: 700;
  margin-bottom: 6px;
}

.map-ui .geom-edit-banner .desc {
  font-size: 13px;
  color: color-mix(in srgb, var(--panel-fg) 70%, transparent);
  margin-bottom: 8px;
}

/* Tugmalarni banner ichida tema bo‘yicha moslash */
.map-ui .geom-edit-banner .actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.map-ui .geom-edit-banner .btn {
  appearance: none;
  border: 1px solid var(--panel-border);
  background: color-mix(in srgb, var(--panel-bg) 96%, var(--panel-fg) 4%);
  color: var(--panel-fg);
  border-radius: 10px;
  height: 36px;
  padding: 0 12px;
  cursor: pointer;
  transition: transform 0.03s ease, box-shadow 0.15s ease, background 0.15s ease;
}

.map-ui .geom-edit-banner .btn:hover {
  background: color-mix(in srgb, var(--panel-bg) 90%, var(--panel-fg) 10%);
}
.map-ui .geom-edit-banner .btn:focus {
  outline: none;
  box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
}
.map-ui .geom-edit-banner .btn:active {
  transform: translateY(1px);
}

.map-ui .geom-edit-banner .btn.primary {
  background: linear-gradient(135deg, var(--brand), var(--brand-2));
  color: #fff;
  border-color: transparent;
  box-shadow: 0 8px 18px rgba(34, 197, 94, 0.22);
}
