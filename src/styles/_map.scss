/* src/styles/map.scss */

/* Katta konteyner: 2 qator — [map-canvas] / [panel] */
.map-wrapper {
  /* Header balandligini React’dan kiritamiz: style={{ '--header-h': '60px' }} */
  --header-h: 60px;

  display: grid;
  grid-template-rows: 1fr auto;
  height: calc(100vh - var(--header-h));
  background: var(--bg);
  color: var(--text);
  gap: 0; /* qat’iy bo‘lsin */

  /* Map qatori */
  .map-canvas {
    position: relative;
    min-height: 320px; /* kichik ekranlar uchun kafolat */
    /* Leaflet konteyneri to‘liq to‘lsin */
    .leaflet-container {
      position: absolute;
      inset: 0;
      height: 100%;
      width: 100%;
      background: var(--bg) !important;
      border-bottom: 1px solid var(--border);
    }
  }

  /* Pastki panel (GeoJSON/controls) */
  .panel {
    flex: 0 0 auto;
    position: relative;
    z-index: 1; /* xaritaning ustida, lekin ustma-ust emas */
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    background: var(--card);
    border-top: 1px solid var(--border);
    padding: 12px;

    @media (max-width: 900px) {
      grid-template-columns: 1fr;
    }

    .panel-col {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 10px;
      color: var(--text);
      box-shadow: var(--shadow-sm);
      min-height: 120px;
    }

    textarea {
      width: 100%;
      height: 220px;
      background: var(--card);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      outline: none;
      padding: 10px 12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", monospace;
      font-size: 12px;
      transition: box-shadow 0.15s, border-color 0.15s, background 0.15s;
    }
    textarea:focus {
      border-color: transparent;
      box-shadow: 0 0 0 4px color-mix(in srgb, var(--brand) 28%, transparent);
      background: color-mix(in srgb, var(--brand) 6%, var(--card));
    }

    .panel-actions {
      margin-top: 8px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;

      button {
        background: var(--card);
        color: var(--text);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 8px 10px;
        cursor: pointer;
        transition: background 0.15s, transform 0.03s;
      }
      button:hover {
        background: color-mix(in srgb, var(--brand) 8%, var(--card));
      }
      button:active {
        transform: translateY(1px);
      }
    }
  }
}

/* Leaflet boshqaruvlari */
.leaflet-control-zoom a,
.leaflet-control-layers-toggle {
  background: var(--card) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  border-radius: 10px !important;
}
.leaflet-bar a:hover {
  background: color-mix(in srgb, var(--brand) 8%, var(--card)) !important;
}

/* LayersControl — expanded panel theme */
.leaflet-control-layers-expanded {
  background: var(--card) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  border-radius: 12px !important;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12) !important;
  padding: 6px 6px 8px 6px !important;
}

.leaflet-control-layers-list {
  margin: 0 !important;
  padding: 4px !important;
}

.leaflet-control-layers-separator {
  border-top: 1px solid var(--border) !important;
  margin: 6px 4px !important;
}

.leaflet-control-layers-base label,
.leaflet-control-layers-overlays label {
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  color: var(--text) !important;
  background: transparent !important;
  padding: 6px 8px !important;
  border-radius: 8px !important;
  cursor: pointer !important;
}

.leaflet-control-layers-base label:hover,
.leaflet-control-layers-overlays label:hover {
  background: color-mix(in srgb, var(--brand) 8%, var(--card)) !important;
}

/* Radio/checkbox accent rangini tema brandidan olamiz */
.leaflet-control-layers-selector {
  accent-color: var(--brand);
  width: 16px;
  height: 16px;
  flex: 0 0 16px;
  margin: 0 8px 0 0 !important; /* label matnidan oldin bo'shliq */
  align-self: center;
}

/* Label matnini ham vertikal markazga keltiramiz */
.leaflet-control-layers-base label span,
.leaflet-control-layers-overlays label span {
  display: inline-flex;
  align-items: center;
  line-height: 1.2;
}

/* Kichik ekranlarda panel biroz kattaroq bo'lsin */
@media (max-width: 640px) {
  .leaflet-control-layers-expanded {
    padding: 8px !important;
  }
  .leaflet-control-layers-base label,
  .leaflet-control-layers-overlays label {
    padding: 8px 10px !important;
  }
}

/* Popuplar */
.leaflet-popup-content-wrapper,
.leaflet-popup-tip {
  background: var(--card);
  color: var(--text);
  border: 1px solid var(--border);
}
